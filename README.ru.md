# Google Apps Script + Svelte 5 Template (No-TS)

–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ Google Apps Script (GAS) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ **Svelte 5** –∏ —á–∏—Å—Ç–æ–≥–æ **JavaScript**.

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ **"Injection Strategy"**: –≤—ã –ø–∏—à–µ—Ç–µ –º–æ–¥—É–ª—å–Ω—ã–π –∫–æ–¥ —Å `import`, –∞ —Å–±–æ—Ä—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (npm –ø–∞–∫–µ—Ç—ã –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏) –≤–Ω—É—Ç—Ä—å –≤–∞—à–∏—Ö —Ñ–∞–π–ª–æ–≤, —Å–æ—Ö—Ä–∞–Ω—è—è –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ (`doGet`, `onOpen`).

## üåü –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

*   **Svelte 5 (Runes):** –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `$state`, `$effect` –∏ –Ω–æ–≤–æ–π —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ Svelte.
*   **Smart Injection Build:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `import { format } from 'date-fns'` –ø—Ä—è–º–æ –≤ —Ñ–∞–π–ª–∞—Ö GAS. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–Ω–∞, —Å–æ–±—Ä–∞–Ω–∞ –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–∞–Ω–¥–ª –∏ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ –≤–∞—à —Ñ–∞–π–ª –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π.
*   **–ù–∏–∫–∞–∫–∏—Ö —Ö–∞–∫–æ–≤ —Å GlobalThis:** –ü–∏—à–∏—Ç–µ –æ–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ `function doGet()`. –°–±–æ—Ä—â–∏–∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ Google Apps Script —É–≤–∏–¥–∏—Ç –∏—Ö –∫–∞–∫ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞.
*   **Vite:** –ú–æ–ª–Ω–∏–µ–Ω–æ—Å–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (–≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã —É–ø–∞–∫–æ–≤—ã–≤–∞—é—Ç—Å—è –≤ –æ–¥–∏–Ω HTML —Ñ–∞–π–ª).
*   **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã:** –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å —Ä—É—Å—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã (`\uXXXX`) –ø—Ä–∏ —Å–±–æ—Ä–∫–µ.

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
root/
‚îú‚îÄ‚îÄ .clasp.json           # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Clasp (—Å–≤—è–∑—å —Å Google –ø—Ä–æ–µ–∫—Ç–æ–º)
‚îú‚îÄ‚îÄ package.json          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ build.js              # (!) –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ (Backend + Frontend)
‚îú‚îÄ‚îÄ vite.config.js        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Vite
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ appsscript.json   # –ú–∞–Ω–∏—Ñ–µ—Å—Ç GAS (–ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞, —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ backend/          # –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥ (GAS)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.js       # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ frontend/         # –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥ (Svelte)
‚îÇ       ‚îú‚îÄ‚îÄ index.html
‚îÇ       ‚îú‚îÄ‚îÄ main.js
‚îÇ       ‚îî‚îÄ‚îÄ App.svelte
‚îÇ
‚îî‚îÄ‚îÄ dist/                 # –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–±–æ—Ä–∫–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç—Å—è)
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    npm install
    ```

2.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Clasp:**
    –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Clasp –≥–ª–æ–±–∞–ª—å–Ω–æ –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å:
    ```bash
    npm install -g @google/clasp
    clasp login
    ```

3.  **–°–≤—è–∂–∏—Ç–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º Google:**
    –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.clasp.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
    ```json
    {
      "scriptId": "–í–ê–®_SCRIPT_ID",
      "rootDir": "./dist"
    }
    ```

## üõ† –ö–æ–º–∞–Ω–¥—ã (Scripts)

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| `npm run dev` | –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (Vite). –¢–æ–ª—å–∫–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (HMR), –≤—ã–∑–æ–≤—ã –∫ GAS –∑–∞–≥–ª—É—à–µ–Ω—ã. |
| `npm run build` | –ü–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –ø–∞–ø–∫—É `dist/`. |
| `npm run push` | –°–±–æ—Ä–∫–∞ + –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–¥–∞ –Ω–∞ Google Drive (–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏). |
| `npm run deploy` | **–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–µ–ª–∏–∑–∞:** –°–±–æ—Ä–∫–∞ ‚Üí –ó–∞–≥—Ä—É–∑–∫–∞ ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ (Versioned Deployment). |


## üß© –ö–∞–∫ –ø–∏—Å–∞—Ç—å –∫–æ–¥ (Backend)

–°–±–æ—Ä—â–∏–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é "–ò–Ω–ª–∞–π–Ω–∏–Ω–≥–∞" (Inlining). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ—â—å NPM –±–∏–±–ª–∏–æ—Ç–µ–∫, –æ—Å—Ç–∞–≤–∞—è—Å—å –≤ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–π —Å—Ä–µ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è GAS.

### 1. –ò–º–ø–æ—Ä—Ç—ã (–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏)
–í—ã –º–æ–∂–µ—Ç–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ NPM –ø–∞–∫–µ—Ç–æ–≤ –∏–ª–∏ —Å–æ—Å–µ–¥–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤.

```javascript
// src/backend/main.js
import { format } from 'date-fns'; // NPM –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
import { helper } from './utils.js'; // –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª

function doGet() {
  // –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ date-fns –±—É–¥–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä—è–º–æ –≤–Ω—É—Ç—Ä—å —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
  const date = format(new Date(), 'yyyy-MM-dd'); 
  return HtmlService.createHtmlOutput(date);
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ —Å–±–æ—Ä–∫–µ:**
–°–±–æ—Ä—â–∏–∫ –Ω–∞—Ö–æ–¥–∏—Ç `import`, —Å–æ–±–∏—Ä–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É —á–µ—Ä–µ–∑ `esbuild` –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é IIFE-—Ñ—É–Ω–∫—Ü–∏—é (—á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö) –∏ –∑–∞–º–µ–Ω—è–µ—Ç —Å—Ç—Ä–æ–∫—É –∏–º–ø–æ—Ä—Ç–∞ –Ω–∞:
```javascript
const { format } = (() => { /* ...–∫–æ–¥ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ date-fns... */ return exports; })();
```

### 2. –û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏ –°–∫–ª–µ–π–∫–∞
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ —Ñ–∞–π–ª—ã –±—ç–∫–µ–Ω–¥–∞ —Å–∫–ª–µ–∏–≤–∞—é—Ç—Å—è –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª `Code.js` (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `concatenate: true`). –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ, —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –æ–±—â–∏–º–∏ –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤.

*   **–°–æ–≤–µ—Ç:** –ò–∑–±–µ–≥–∞–π—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—â–∏—Ö –∏–º–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `const data = ...`) –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö.
*   –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–ª–æ—á–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ `{ ... }` –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏-–æ–±–µ—Ä—Ç–∫–∏ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –ª–æ–≥–∏–∫–∏ –º–æ–¥—É–ª–µ–π.

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–±–æ—Ä–∫–∏ (build.js)

–í—ã –º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ–º —Å–±–æ—Ä–∫–∏ —á–µ—Ä–µ–∑ –æ–±—ä–µ–∫—Ç `CONFIG` –≤ —Ñ–∞–π–ª–µ `build.js`:

```javascript
backendSettings: {
  concatenate: true,   // true = –°–∫–ª–µ–∏—Ç—å –≤—Å—ë –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª Code.js (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
                       // false = –û—Å—Ç–∞–≤–∏—Ç—å —Ñ–∞–π–ª—ã —Ä–∞–∑–¥–µ–ª—å–Ω—ã–º–∏ (–ò–º–ø–æ—Ä—Ç—ã –≤—Å—ë —Ä–∞–≤–Ω–æ –∏–Ω–ª–∞–π–Ω—è—Ç—Å—è)
  
  outFile: 'Code.js',  // –ò–º—è –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞
  
  minify: true,        // –ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞.
                       // –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ò–º–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π (doGet) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
                       
  priorityOrder: [     // –ü–æ—Ä—è–¥–æ–∫ —Å–∫–ª–µ–π–∫–∏ —Ñ–∞–π–ª–æ–≤ (–≤–∞–∂–Ω–æ –¥–ª—è –ø–æ—Ä—è–¥–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
    'config.js',
    'utils/logger.js'
  ]
},

modules: {
  frontend: true,      // –ú–æ–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å false, –µ—Å–ª–∏ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–∞–¥ –±—ç–∫–µ–Ω–¥–æ–º
  backend: true
}
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è
MIT